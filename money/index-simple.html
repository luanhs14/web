<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Planner - TESTE SIMPLES</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            background: #0e1117;
            color: #fff;
        }
        header {
            background: #161b22;
            padding: 20px;
            border-bottom: 2px solid #2d3644;
        }
        .tab-nav {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .tab-btn {
            background: transparent;
            border: none;
            color: #a1acbe;
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-size: 16px;
            transition: all 0.3s;
        }
        .tab-btn.active {
            color: #388bfd;
            border-bottom-color: #388bfd;
        }
        .tab-btn:hover {
            color: #388bfd;
        }
        main {
            padding: 20px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .card {
            background: #161b22;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #2d3644;
        }
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid;
        }
        .alert.success {
            background: rgba(52, 211, 153, 0.2);
            border-color: #34d399;
            color: #34d399;
        }
        .alert.info {
            background: rgba(56, 139, 253, 0.2);
            border-color: #388bfd;
            color: #388bfd;
        }
        button.test-btn {
            background: #388bfd;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button.test-btn:hover {
            background: #2c6bbf;
        }
        #debug-log {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .debug-line {
            margin: 2px 0;
        }
    </style>
</head>
<body>
    <header>
        <h1>üí∞ Money Planner - TESTE SIMPLES</h1>
        <p style="color: #a1acbe; margin-top: 10px;">Vers√£o de teste sem bibliotecas externas</p>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="dashboard">üè† Dashboard</button>
            <button class="tab-btn" data-tab="accounts">üìù Contas</button>
            <button class="tab-btn" data-tab="settings">‚öôÔ∏è Config</button>
        </nav>
    </header>

    <main>
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="card">
                <h2>üè† Dashboard</h2>
                <div class="alert success">
                    ‚úÖ Voc√™ est√° vendo a aba DASHBOARD
                </div>
                <p style="color: #a1acbe; margin-top: 15px;">
                    Esta √© a aba principal onde aparecem estat√≠sticas e gr√°ficos.
                </p>
                <button class="test-btn" onclick="testAPI()">Testar API</button>
                <button class="test-btn" onclick="testTabs()">Testar Troca de Abas</button>
                <button class="test-btn" onclick="clearDebug()">Limpar Debug</button>
            </div>

            <div class="card">
                <h2>üêõ Debug Console</h2>
                <div id="debug-log">
                    <div class="debug-line">[INICIO] Aguardando testes...</div>
                </div>
            </div>
        </div>

        <!-- Accounts Tab -->
        <div id="accounts" class="tab-content">
            <div class="card">
                <h2>üìù Contas</h2>
                <div class="alert info">
                    ‚ÑπÔ∏è Voc√™ est√° vendo a aba CONTAS
                </div>
                <p style="color: #a1acbe; margin-top: 15px;">
                    Aqui voc√™ adiciona e gerencia suas contas mensais.
                </p>
                <div style="margin-top: 20px;">
                    <strong>Se voc√™ est√° vendo este texto, as abas est√£o funcionando! ‚úÖ</strong>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h2>‚öôÔ∏è Configura√ß√µes</h2>
                <div class="alert info">
                    ‚ÑπÔ∏è Voc√™ est√° vendo a aba CONFIGURA√á√ïES
                </div>
                <p style="color: #a1acbe; margin-top: 15px;">
                    Aqui voc√™ configura notifica√ß√µes e EmailJS.
                </p>
                <div style="margin-top: 20px;">
                    <strong>Se voc√™ est√° vendo este texto, as abas est√£o funcionando! ‚úÖ</strong>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Log de debug
        function debugLog(msg, type = 'info') {
            const log = document.getElementById('debug-log');
            const time = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#f00' : type === 'success' ? '#0f0' : '#0ff';
            const line = document.createElement('div');
            line.className = 'debug-line';
            line.style.color = color;
            line.textContent = `[${time}] ${msg}`;
            log.appendChild(line);
            log.scrollTop = log.scrollHeight;
            console.log(msg);
        }

        function clearDebug() {
            document.getElementById('debug-log').innerHTML = '<div class="debug-line">[LIMPO] Log resetado</div>';
        }

        // Sistema de abas
        debugLog('üöÄ Iniciando sistema de abas...', 'info');

        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        debugLog(`‚úÖ Encontrados ${tabBtns.length} bot√µes de abas`, 'success');
        debugLog(`‚úÖ Encontrados ${tabContents.length} conte√∫dos de abas`, 'success');

        tabBtns.forEach(btn => {
            const tabName = btn.getAttribute('data-tab');
            debugLog(`  - Bot√£o registrado: ${btn.textContent.trim()} (${tabName})`);

            btn.addEventListener('click', () => {
                debugLog(`üñ±Ô∏è Clique detectado na aba: ${tabName}`, 'info');

                // Remover active de todos
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));

                // Adicionar active no clicado
                btn.classList.add('active');
                const targetContent = document.getElementById(tabName);

                if (targetContent) {
                    targetContent.classList.add('active');
                    debugLog(`‚úÖ Aba ${tabName} ativada com sucesso!`, 'success');
                } else {
                    debugLog(`‚ùå Conte√∫do da aba ${tabName} n√£o encontrado!`, 'error');
                }
            });
        });

        debugLog('‚úÖ Event listeners configurados', 'success');

        // Teste de API
        async function testAPI() {
            debugLog('üß™ Testando API...', 'info');
            try {
                const response = await fetch('/api/health');
                const data = await response.json();

                if (data.success) {
                    debugLog('‚úÖ API respondendo: ' + data.message, 'success');
                } else {
                    debugLog('‚ùå API retornou erro', 'error');
                }
            } catch (error) {
                debugLog('‚ùå Erro ao conectar com API: ' + error.message, 'error');
            }
        }

        // Teste de troca de abas
        function testTabs() {
            debugLog('üß™ Testando troca autom√°tica de abas...', 'info');

            const tabs = ['dashboard', 'accounts', 'settings'];
            let index = 0;

            const interval = setInterval(() => {
                const tabName = tabs[index];
                const btn = document.querySelector(`[data-tab="${tabName}"]`);

                if (btn) {
                    btn.click();
                    debugLog(`üîÑ Trocando para: ${tabName}`, 'info');
                    index++;

                    if (index >= tabs.length) {
                        clearInterval(interval);
                        debugLog('‚úÖ Teste de abas completo!', 'success');
                    }
                } else {
                    debugLog(`‚ùå Bot√£o ${tabName} n√£o encontrado`, 'error');
                    clearInterval(interval);
                }
            }, 1500);
        }

        // Log inicial
        debugLog('‚úÖ‚úÖ‚úÖ Sistema pronto!', 'success');
        debugLog('üí° Clique nas abas acima ou use os bot√µes de teste', 'info');
    </script>
</body>
</html>
